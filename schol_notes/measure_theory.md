# Introductory measure theory

## Algebras and ``\sigma``-algebras

An **algebra** for our purposes here is a non-empty collection of subsets of some set ``E`` that is closed under

 - complements
 - finite unions
 - finite intersections

A **``\sigma``-algebra** is like an algebra, but closed under *countable* unions/intersections instead of merely finite unions/intersections.

A ``\sigma``-algebra on ``E`` must contain ``\emptyset`` and ``E``. The ``\sigma``-algebra consisting only of these sets is the **trivial ``\sigma``-algebra**, while the powerset is the **discrete ``\sigma``-algebra**.

The intersection of an arbitrary collection of ``\sigma``-algebras is again a ``\sigma``-algebra (prove it). This allows us to *generate* ``\sigma``-algebras from an arbitrary collection of subsets: if ``\mathcal{C}`` is any collection of subsets of ``E``, the **``\sigma``-algebra generated by ``\mathcal{C}``** is defined to be the intersection of all ``\sigma``-algebras on ``E`` that contain it. This will be deoted by ``\sigma \mathcal{C}``.

## Borel algebras

When ``E`` is a topological space, the ``\sigma``-algebra generated by its topology is called the **Borel ``\sigma``-algebra** on ``E``, and will be denoted by ``\mathcal{B}(E)``. The elements of this ``\sigma``-algebra are called **Borel sets**.


## Real borel algebras

Let us denote the Borel algebra of ``\mathbb{R}^d`` as ``\mathcal{B}(\mathbb{R}^d)``.

Then it can be proven that ``\mathcal{B}(\mathbb{R})`` is identically the ``\sigma``-algebra generated from each of the following sets:

 1. ``X_1 = \text{all closed subsets of } \mathbb{R}``
 2. ``X_2 = \text{all intervals } (-\infty, b]``
 3. ``X_3 = \text{all intervals } (a, b]``

*Proof:* It suffices to prove that

```math
    \sigma X_3 \subseteq \sigma X_2 \subseteq \sigma X_1 \subseteq \mathcal{B}(\mathbb{R}) \subseteq \sigma X_3
```

Furthermore, for any sets ``A`` and ``B``, to prove ``\sigma A \subseteq \sigma B`` it suffices to show ``A \subseteq \sigma B``, because this implies that ``\sigma B`` is a ``\sigma``-algebra containing ``A``, implying ``\sigma A \subseteq \sigma B``.

To see that ``X_3 \subseteq \sigma X_2``, note that ``(a, b]`` is the complement of ``(- \infty, a] \cup (b, \infty)``.

Next, we can actually prove that ``X_2 \subseteq X_1`` because any interval ``(- \infty, b]`` is closed.

To prove ``X_1 \subseteq \mathcal{B}(\mathbb{R})``, recall that ``\mathcal{B}(\mathbb{R})`` is the ``\sigma``-algebra generated by the open sets, and that ``\sigma``-algebras are closed under complements. Also recall (from basic topology) that a set is closed iff its complement is open.

Finally, to prove the open subsets of $\mathbb{R}$ are a subset of $\sigma X_3$, note that every open subset of $\mathbb{R}$ is a countable disjoint union of (finite) open intervals (see notes on the topology of the reals), and that any open interval ``(a, b)`` is given by a union:

```math
    (a, b) = \bigcup_1^{\infty} (a, b - 1/n]
```

So each open interval `(a, b)` is in $\sigma X_3$, which means all countable unions (and hence all open subsets) are in $\sigma X_3$ as well.



## Measurable space

A **measurable space** is a pair ``(X, \mathcal{A})`` where ``X`` is a set and ``\mathcal{A}`` is a ``\sigma``-algebra. The elements of ``\mathcal{A}`` are called the **measurable sets**.

## Outer measure, measure

An **outer measure** on any set ``X`` is a function ``\mu^{\ast}: \text{Pow } X \to [0, \infty]`` that obeys:

 - ``\mu^{\ast}(\emptyset) = 0``
 - ``A \subseteq B \subseteq X`` implies ``\mu^{\ast}(A) \leq \mu^{\ast}(B)``
 - If ``\{A_n\}`` is any countable collection of subsets of ``X``, then ``\mu^{\ast}(\bigcup_1^{\infty} A_n) \leq \sum_1^{\infty} \mu^{\ast}(A_n)``

A **measure** on a measurable space ``(X, \mathcal{A})`` is a function ``\mu: \mathcal{A} \to [0, \infty]`` that obeys:

 - ``\mu(\emptyset) = 0``
 - If ``\{A_n\}`` is any countable, pairwise disjoint collection of sets in ``\mathcal{A}``, then ``\mu(\bigcup_1^{\infty} A_n) = \sum_1^{\infty} \mu(A_n)``

To summarize the differences between a measure and an outer measure: outer measures are defined on a power set and are monotone and countably subadditive, while measures are defined on the ``\sigma``-algebra of some measurable space and have countable additivity (for disjoint collections).

## Dynkin systems and stuff (TODO: organize this)

### p-system, d-system

A **p-system** on ``E`` is any collection of subsets that is closed under finite intersection. A **d-system** on ``E`` is any collection ``\mathcal{D}`` of subsets obeying

 - ``E \in \mathcal{D}``
 - if ``A, B \in \mathcal{D}`` and ``B \subseteq A``, then ``A - B \in \mathcal{D}``
 - if ``(A_n)`` is a sequence of sets and ``A_k \subseteq A_{k+1}`` for all ``k``, then ``\bigcup_n A_n \in \mathcal{D}``

## p-systems, d-systems, and ``\sigma``-algebras

A collection of subsets of ``E`` is a ``\sigma``-algebra on ``E`` iff it is simultaneously a p-system and d-system for ``E``.

Clearly any ``\sigma``-algebra is both a p-system and d-system. Conversely, any system ``\mathcal{C}`` that is both a p-system and a d-system is closed under complements by the first two properties. If ``\{A_n : n \in \mathbb{N}\}`` is any countable collection of sets, then we have

```math
    \bigcup_0^{\infty} A_n = \bigcup_0^{\infty} B_n
```

where ``B_n := \bigcup_1^n A_n``. This reformulation has the advantage of the ``B_n``'s being increasing, so we can apply the third p-system axiom to get ``\bigcup_0^{\infty} A_n \in \mathcal{D}``, so ``\mathcal{C}`` is closed under countable unions. These two properties prove ``\mathcal{C}`` is closed under countable intersection, so ``\mathcal{C}`` is a ``\sigma``-algebra.


### Dynkin's ``\pi-\lambda`` theorem?

#### A lemma

Here's a lemma that Çinlar states: if ``\mathcal{D}`` is a d-system and ``D \in \mathcal{D}``, then ``\hat{\mathcal{D}} := \{A \in \mathcal{D} : A \cap D \in \mathcal{D}\}`` is also a d-system for ``D``.

Clearly ``D \in \hat{\mathcal{D}}``. If ``A, B \in \hat{\mathcal{D}}`` and ``B \subseteq A``, then since ``A \cap D, B \cap D \in \mathcal{D}``, we have ``A \cap D - B \cap D = (A - B) \cap D \in \mathcal{D}`` (since ``B \cap D \subseteq A \cap D``), so ``A - B \in \hat{\mathcal{D}}``

Finally, if ``(A_n)`` is an increasing sequence in ``\hat{\mathcal{D}}``, then ``(A_n \cap D)`` is an increasing sequence in ``\mathcal{D}``, so ``(\bigcup_0^{\infty} A_n) \cap D = \bigcup_0^{\infty} A_n \cap D \in \mathcal{D}``, so  ``\bigcup_0^{\infty} A_n \in \hat{\mathcal{D}}``.

#### The proof

The statement is: any d-system containing some p-system also contains the ``\sigma``-algebra generated from the p-system.

We let ``\mathcal{I}`` be a p-system (for some set ``E``) and ``\mathcal{D}`` be the smallest d-system (for ``E``) containing ``\mathcal{I}``. The aim is to prove that ``\sigma \mathcal{I} \subseteq \mathcal{D}`` (we already have the other direction since ``\sigma \mathcal{I}`` is necessarily both a d-system and a p-system).

But ``\sigma \mathcal{I}`` is the smallest ``\sigma``-algebra containing ``\mathcal{I}``, so it would suffice to prove that ``\mathcal{D}`` is a ``\sigma``-algebra. So we need only prove that it's a p-system.
Let ``A \in \mathcal{I}``. Then

```math
    \mathcal{D}_A := \{B \in \mathcal{D} : B \cap A \in \mathcal{D} \}
```

is also a d-system by the previous lemma. But ``\mathcal{D}_A`` contains ``\mathcal{I}`` since for all ``B \in \mathcal{I}``, ``B \cap A \in \mathcal{I}`` (definition of a p-system). So actually ``\mathcal{D}_A = \mathcal{D}``, or in other words the intersection of any ``\mathcal{D}``-set with any ``A \in \mathcal{I}`` is in ``\mathcal{D}``.

But this implies that for any ``S \in \mathcal{D}``, ``\mathcal{D}_S`` is a d-system containing ``\mathcal{I}``. So it must be a superset of ``\mathcal{D}``, and so by definition *is* ``\mathcal{D}``. This establishes that ``\mathcal{D}`` is a p-system.

#### Notes on the name

Çinlar calls this the "monotone class theorem", but that doesn't seem to square with what's on wikipedia. Wikipedia seems to call this theorem (first proved by Dynkin) the "``\pi-\lambda`` theorem" instead (it seems an alternate name for p-system is ``\pi``-system, and an alternate name for d-system is ``\lambda``-system)
